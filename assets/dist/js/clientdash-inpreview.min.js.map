{"version":3,"sources":["clientdash-inpreview.min.js"],"names":["cd_customize_links","e","links","document","getElementsByTagName","i","len","length","onclick","preventDefault","node","target","href","parentNode","window","parent","postMessage","id","link","ClientDashCustomizeInPreview_Data","domain","cd_customize_overlay","body","className","indexOf","content","getElementById","cover","createElement","cover_text","innerHTML","appendChild","cd_customize_forms","forms","form","addEventListener","cd_customize_forms_prevent_submit"],"mappings":"AAKA,QAASA,oBAAmBC,GAIxB,IAAK,GAFDC,GAAQC,SAASC,qBAAqB,KAEjCC,EAAI,EAAGC,EAAMJ,EAAMK,OAAQF,EAAIC,EAAKD,IAEzCH,EAAMG,GAAGG,QAAU,SAAUP,GAEzBA,EAAEQ,gBAKF,KAFA,GAAIC,GAAOT,EAAEU,OAEND,IAASA,EAAKE,MAEjBF,EAAOA,EAAKG,UAGhB,SAAKH,EAAKE,OAKVE,OAAOC,OAAOC,aACVC,GAAI,oCACJC,KAAMR,EAAKE,MACZO,kCAAkCC,SAE9B,IAUnB,QAASC,wBAGDlB,SAASmB,KAAKC,UAAUC,QAAQ,gBAAiB,CAKrD,IAAIC,GAAUtB,SAASuB,eAAe,UAClCC,EAAQxB,SAASyB,cAAc,OAC/BC,EAAa1B,SAASyB,cAAc,MAExCD,GAAMV,GAAK,6BACXY,EAAWN,UAAY,kCACvBM,EAAWC,UAAYX,kCAAwC,KAAgB,aAE/EQ,EAAMI,YAAYF,GAClBJ,EAAQM,YAAYJ,GAQxB,QAASK,sBAEL,IAAK,GAAI3B,GAAI,EAAGA,EAAIF,SAAS8B,MAAM1B,OAAQF,IAAK,CAE5C,GAAI6B,GAAO/B,SAAS8B,MAAM5B,EAE1B6B,GAAKC,iBAAiB,SAAUC,mCAAmC,IAY3E,QAASA,mCAAkCnC,GAOvC,MALAa,QAAOC,OAAOC,aACVC,GAAI,oCACLE,kCAAkCC,QAErCnB,EAAEQ,kBACK,EAGXN,SAASgC,iBAAiB,mBAAoBnC,oBAAoB,GAClEG,SAASgC,iBAAiB,mBAAoBd,sBAAsB,GACpElB,SAASgC,iBAAiB,mBAAoBH,oBAAoB","file":"clientdash-inpreview.min.js","sourcesContent":["/**\n * Loads on page-load for inside the customize preview iframe.\n *\n * @since {{VERSION}}\n */\nfunction cd_customize_links(e) {\n\n    var links = document.getElementsByTagName('a');\n\n    for (var i = 0, len = links.length; i < len; i++) {\n\n        links[i].onclick = function (e) {\n\n            e.preventDefault();\n\n            // Try to get nearest link if clicked item isn't a link (nested)\n            var node = e.target\n\n            while (node && !node.href) {\n\n                node = node.parentNode\n            }\n\n            if (!node.href) {\n\n                return false;\n            }\n\n            window.parent.postMessage({\n                id: 'cd_customize_preview_link_clicked',\n                link: node.href\n            }, ClientDashCustomizeInPreview_Data.domain);\n\n            return false;\n        }\n    }\n}\n\n/**\n * Adds a \"protective\" overlay to non-dashboard pages to signal user that it is only a preview.\n *\n * @since {{VERSION}}\n */\nfunction cd_customize_overlay() {\n\n    // Don't load on dashboard\n    if (document.body.className.indexOf('index-php') !== -1) {\n\n        //return;\n    }\n\n    var content = document.getElementById('wpwrap');\n    var cover = document.createElement('div');\n    var cover_text = document.createElement('div');\n\n    cover.id = 'cd-customize-preview-cover';\n    cover_text.className = 'cd-customize-preview-cover-text';\n    cover_text.innerHTML = ClientDashCustomizeInPreview_Data['l10n']['preview_only'];\n\n    cover.appendChild(cover_text);\n    content.appendChild(cover);\n}\n\n/**\n * Deal with forms.\n *\n * @since {{VERSION}}\n */\nfunction cd_customize_forms() {\n\n    for (var i = 0; i < document.forms.length; i++) {\n\n        var form = document.forms[i];\n\n        form.addEventListener('submit', cd_customize_forms_prevent_submit, false);\n    }\n}\n\n/**\n * Prevent forms from submitting.\n *\n * @since {{VERSION}}\n *\n * @param e\n * @returns {boolean}\n */\nfunction cd_customize_forms_prevent_submit(e) {\n\n    window.parent.postMessage({\n        id: 'cd_customize_preview_form_submit'\n    }, ClientDashCustomizeInPreview_Data.domain);\n\n    e.preventDefault();\n    return false;\n}\n\ndocument.addEventListener('DOMContentLoaded', cd_customize_links, false);\ndocument.addEventListener('DOMContentLoaded', cd_customize_overlay, false);\ndocument.addEventListener('DOMContentLoaded', cd_customize_forms, false);"]}